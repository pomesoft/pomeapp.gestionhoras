<div class="row mb-2">                    
    <div class="col col-lg-12">
        <div class="form-group row" style="margin-bottom: 5px !important;">
            <label class="col-lg-2 control-label col-form-label text-center">Profesional:</label>
            <div class="col-lg-7">
                <div class="input-group">
                    <div class="input-group">
                        <span class="input-group-addon ">
                            <i class="fa fa-user-o"></i>
                        </span>
                        <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="profesional"
                            [ngbTypeahead]="searchProfesional" (focus)="focus$.next($any($event).target.value)"
                            (click)="click$.next($any($event).target.value)" #instance="ngbTypeahead" />
                        <span class="input-group-btn">
                            <button type="button" class="btn waves-effect waves-light btn-rounded btn-outline-info"
                                data-toggle="tooltip" data-placement="top" title="Limpiar profesional"
                                (click)="onClickLimpiarProfesional($event)">
                                <i class="fa fa-times"></i>
                            </button>
                            <button type="button" class="btn waves-effect waves-light btn-rounded btn-outline-info"
                                (click)="onClickListarTareas($event)">
                                <i class="fa fa-check "></i> 
                                Listar tareas
                            </button>
                        </span>
                    </div>
                </div>

            </div>
        </div>
        <div class="row mb-2">
            <div class="col-12 col-lg-9">
                <form>
                    <div class="input-group">
                        <input type="text" class="form-control w-30" 
                                placeholder="Ingreso texto a buscar y presione enter......" 
                                [formControl]="filtro" >
                        <span class="input-group-btn">
                            <button class="btn btn-outline-info" type="button" data-toggle="tooltip"
                                data-placement="top" title="Buscar"
                                (click)="refreshDatos()">
                                <i class="fa fa-search"></i>
                            </button>
                            <button class="btn btn-outline-info" type="button" data-toggle="tooltip"
                                data-placement="top" title="Borrar"
                                (click)="filtro.reset('')">
                                <i class="fa fa-times"></i>
                            </button>                            
                        </span>
                    </div>
                </form>
            </div>
            <div class="col-12 col-lg-3 p-t-5">
                <button type="button" class="btn btn-rounded btn-outline-success btn-block waves-effect waves-light "
                    (click)="onClickGuardar($event)">
                    <i class="fa fa-save "></i> 
                    Guardar
                </button>
            </div>            
        </div>
        <div class="table-responsive ">                            
            <table class="table">
                <thead>
                    <tr>
                        <th style="width: 5%;"></th>
                        <th style="width: 30%;">Tarea</th>
                        <th style="width: 30%;">Tipo</th>
                        <th style="width: 15%;">Fecha</th>
                        <th style="width: 15%;">Horas</th>
                        <th style="width: 5%;"></th>
                    </tr>
                </thead>
                <tbody>
                    
                    <ng-container *ngFor="let proyecto of listado$ | async;">
                        <tr class="table-info">
                            <td colspan="2">
                                <ngb-highlight [result]="proyecto.Descripcion" [term]="filtro.value"></ngb-highlight>
                            </td>
                            <td>Producto: <ngb-highlight [result]="proyecto.ProductoDescripcion" [term]="filtro.value"></ngb-highlight></td>
                            <td  colspan="2">Desde: {{proyecto.FechaInicio | date : 'dd/MM/yyyy'}} - Hasta: {{proyecto.FechaFin | date : 'dd/MM/yyyy'}}</td>
                            <td>
                                <a href="#" class="btn btn-outline-info btn-rounded btn-sm" data-toggle="tooltip" data-placement="top" title="Editar"
                                    (click)="onClickAbrirProyectoModal($event)">
                                    <span class="h5 text-info"><i class="mdi mdi-pencil-box-outline"></i></span>
                                </a>
                            </td>
                        </tr>
                        
                        <ng-container *ngIf="proyecto.Tareas.length>0">
                            <tr>
                                <td></td>
                                <td colspan="4">
                                    <table class="table">
                                        <!-- <thead>
                                            <tr>
                                                <th style="width: 30%;">Tarea</th>
                                                <th style="width: 30%;">Tipo</th>
                                                <th style="width: 15%;">Fecha</th>
                                                <th style="width: 15%;">Horas</th>
                                            </tr>
                                        </thead> -->
                                        <tbody>
                                            <tr *ngFor="let tarea of proyecto.Tareas">
                                                <td style="width: 30%;"> {{tarea.Id}} - <ngb-highlight [result]="tarea.Descripcion" [term]="filtro.value"></ngb-highlight></td>
                                                <td style="width: 30%;"><ngb-highlight [result]="tarea.Tipo.Descripcion" [term]="filtro.value"></ngb-highlight></td>
                                                <td style="width: 15%;">{{proyecto.FechaInicio | date : 'dd/MM/yyyy'}}</td>
                                                <td style="width: 15%;">
                                                    <input class="form-control" type="number">
                                                </td>
                                            </tr>
                                        </tbody>
                                    
                                    </table>
                                </td>
                            </tr>
                        </ng-container>
                        
                    </ng-container>
                    
                </tbody>
            </table>
            <!-- <div class="d-flex justify-content-between p-2">
                <ngb-pagination
                    [collectionSize]="total"
                    [(page)]="page"                                    
                    [pageSize]="pageSize"
                    [maxSize]="5"
                    [rotate]="true"
                    [boundaryLinks]="true"
                    (pageChange)="refreshDatos()"
                >
                </ngb-pagination>
            
                <select class="form-select" style="width: auto" [(ngModel)]="pageSize" (ngModelChange)="refreshData()">
                    <option [ngValue]="10">10 items por página</option>
                    <option [ngValue]="25">25 items por página</option>
                    <option [ngValue]="50">50 items por página</option>
                </select>
            </div> -->
        </div>
        <div class="row mb-2" *ngIf="hayDatos">
            <div class="col-12 col-lg-9">
                
            </div>
            <div class="col-12 col-lg-3 p-t-5">
                <button type="button" class="btn btn-rounded btn-outline-info btn-block waves-effect waves-light "
                    (click)="onClickGuardar($event)">
                    <i class="fa fa-save "></i> 
                    Guardar
                </button>
            </div>            
        </div>
    </div>
</div>